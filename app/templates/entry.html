{% extends "base.html" %}
{% block title %}{{ entry.title if entry.title else "Lab Entry" }} Â· Lab Notes{% endblock %}
{% block content %}
    <section class="entry-detail-head">
        <a class="entry-link" href="{{ url_for('main.index') }}">Back to timeline</a>
        <h1>{{ entry.title if entry.title else "Daily Entry" }}</h1>
        <p class="entry-date">{{ entry.entry_date|human_date }}</p>
    </section>

    <article class="entry-card single-entry" id="entry-{{ entry.id }}">
        {% if entry.notebook %}
            <section class="notebook-panel">
                <p class="section-label">Notebook Page</p>
                <figure class="notebook-figure">
                    <img
                        src="{{ entry.notebook.url }}"
                        alt="Notebook page for {{ entry.entry_date }}"
                    >
                    {% if entry.notebook.caption %}
                        <figcaption>{{ entry.notebook.caption }}</figcaption>
                    {% endif %}
                </figure>
            </section>
        {% endif %}

        {% if entry.photos %}
            <section class="gallery-panel">
                <p class="section-label">Experiment Gallery</p>
                <div class="gallery-grid">
                    {% for photo in entry.photos %}
                        <figure class="gallery-item">
                            <img
                                src="{{ photo.url }}"
                                alt="{{ photo.caption if photo.caption else 'Experiment photo' }}"
                            >
                            {% if photo.caption %}
                                <figcaption>{{ photo.caption }}</figcaption>
                            {% endif %}
                        </figure>
                    {% endfor %}
                </div>
            </section>
        {% endif %}

        {% if entry.body_markdown %}
            <section class="notes-panel">
                <p class="section-label">Daily Notes</p>
                <div class="markdown-body">
                    {{ entry.body_html|safe }}
                </div>
            </section>
        {% endif %}
    </article>
{% endblock %}
